<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Match-Three Game</title>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"   integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="   crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="canvas">
        <sq class="col2"></sq>

    </div>

    <script>

$(function() {

function initGrid() {
    //fill grid with random squares.
    //content is a colour code. '0' is white. 1-6 are as per css.
    for(var i=0; i<gridLength; i++) {
       var col=Math.floor(Math.random()*7)+1;
       grid[i]=(col);
      }
}

function updateDisplay() {
    //display grid - first square is bottom left
    var str=new Array();
    for (var i=gridSideLength-1; i>=0; i--) {
         for(var j=0; j<gridSideLength; j++) {
             str.push("<sq class='col" + grid[i*8+j] + "'></sq>");
         }
     }
    $('#canvas').html("");
    $('#canvas').html(str.join(""));
}

function selectSquare() {
    //console.log("click!");
    //console.log($(this).index());
    if (selected[0]===null) {
        selected[0]=$(this).index();
        console.log("selected first sq")
        //highlight box
    } else if (selected[0]!==null && selected[1]===null) {
        selected[1]=$(this).index();
        console.log("selected second sq")
        //hightlight box
        //do processing
    }
}

function numberOfMoves() {
    var moveCount=0;
    for(var i=0; i<moveLength; i++) {
        for (var j=0; j<moves[i][4] ; j++) { //row
            for (var k=moves[i][2]; k<moves[i][3]; k++) { //column
                l=j+k*8;
                if(grid[l] === grid[l+moves[i][0]]
                        && grid[l] === grid[l+moves[i][1]]) {
                    moveCount++;
                }
            }
        }
    }
    return moveCount;
}

//create grid, colours
var grid=new Array(64);
var gridLength=grid.length;
var gridSideLength=8;
var selected=[null,null];
var moves = [
    //horizontal moves
    [9,10,0,5,6],
    [1,7,1,6,6],
    [1,10,0,5,6],
    [6,7,2,7,6],
    [2,3,0,4,7],
    [1,3,0,4,7],
    [7,9,1,6,6],
    [9,2,0,5,6],
    //vertical moves
    [9,17,0,6,5],
    [7,15,1,7,5],
    [8,15,1,7,5],
    [8,17,0,6,5],
    [8,24,0,7,4],
    [16,24,0,7,4],
    [7,16,1,7,5],
    [9,16,0,6,5]
];
var movesLength=moves.length;


//initialise grid
initGrid();

//Update display
updateDisplay();

//handle click on squares. Must occur after updateDisplay
$('sq').click(selectSquare);

});
    </script>
</body>
</html>
